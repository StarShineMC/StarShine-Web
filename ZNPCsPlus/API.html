<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ZNPCsPlus API 文档 | 星光StarShine</title>
    <meta name="description" content="专注于现代城市建筑与真实铁路交通规划，基于Fabric 1.20.1高优化环境运行。核心特色：深度整合MTR地铁模拟系统实现真实轨道规划，WorldEdit快速建造支持中国地标复刻。采用审核制社群管理，保障高质量建筑设计，提供标准化车站指南及建造资源包。加入中文玩家社区，参与城市联建计划与交通网络设计。">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/StarShine-Web/assets/style.DirK_ipN.css" as="style">
    <link rel="preload stylesheet" href="/StarShine-Web/vp-icons.css" as="style">
    
    <script type="module" src="/StarShine-Web/assets/app.CbBct8v8.js"></script>
    <link rel="preload" href="/StarShine-Web/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/StarShine-Web/assets/chunks/theme.CZRo6j5l.js">
    <link rel="modulepreload" href="/StarShine-Web/assets/chunks/framework.BGcsQhgv.js">
    <link rel="modulepreload" href="/StarShine-Web/assets/ZNPCsPlus_API.md.Fwq-wxZM.lean.js">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/favicon.ico">
    <link rel="mask-icon" href="/favicon.ico" color="#3eaf7c">
    <meta name="msapplication-TileImage" content="/favicon.ico">
    <meta name="msapplication-TileColor" content="#000000">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-ae963f28><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0d803733></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0d803733>Skip to content</a><!--]--><!----><header class="VPNav" data-v-ae963f28 data-v-dd46fddc><div class="VPNavBar" data-v-dd46fddc data-v-75e0aaf6><div class="wrapper" data-v-75e0aaf6><div class="container" data-v-75e0aaf6><div class="title" data-v-75e0aaf6><div class="VPNavBarTitle" data-v-75e0aaf6 data-v-7625b644><a class="title" href="/StarShine-Web/" data-v-7625b644><!--[--><!--]--><!--[--><img class="VPImage logo" src="/StarShine-Web/logo.png" alt data-v-b3e11f27><!--]--><span data-v-7625b644>星光StarShine</span><!--[--><!--[--><!--[--><!--[--><img class="visitor" src="https://visitor-badge.laobi.icu/badge?page_id=starshine.vitepress-web" onerror="this.style.display=&#39;none&#39;" data-v-124f1dab><!--]--><!--]--><!--]--><!--]--></a></div></div><div class="content" data-v-75e0aaf6><div class="content-body" data-v-75e0aaf6><!--[--><!--]--><div class="VPNavBarSearch search" data-v-75e0aaf6><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-75e0aaf6 data-v-64d30c34><span id="main-nav-aria-label" class="visually-hidden" data-v-64d30c34> Main Navigation </span><!--[--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="http://mc.8bc.top:20000/" target="_blank" rel="noreferrer" tabindex="0" data-v-64d30c34 data-v-2f18d88a><!--[--><span data-v-2f18d88a>插件服在线地图</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="http://mc.8bc.top:27774/" target="_blank" rel="noreferrer" tabindex="0" data-v-64d30c34 data-v-2f18d88a><!--[--><span data-v-2f18d88a>模组服在线地图</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-75e0aaf6 data-v-5935c4bf><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-5935c4bf data-v-0ad617a5 data-v-fa4fbb5e><span class="check" data-v-fa4fbb5e><span class="icon" data-v-fa4fbb5e><!--[--><span class="vpi-sun sun" data-v-0ad617a5></span><span class="vpi-moon moon" data-v-0ad617a5></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-75e0aaf6 data-v-4de160cd data-v-0b2298c5><!--[--><a class="VPSocialLink no-icon" href="https://github.com/maomao1996/vitepress-nav-template" aria-label="github" target="_blank" rel="noopener" data-v-0b2298c5 data-v-20dc374c><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-75e0aaf6 data-v-e7b0f3b8 data-v-5265d8b1><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-5265d8b1><span class="vpi-more-horizontal icon" data-v-5265d8b1></span></button><div class="menu" data-v-5265d8b1><div class="VPMenu" data-v-5265d8b1 data-v-48acf8b1><!----><!--[--><!--[--><!----><div class="group" data-v-e7b0f3b8><div class="item appearance" data-v-e7b0f3b8><p class="label" data-v-e7b0f3b8>主题</p><div class="appearance-action" data-v-e7b0f3b8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-e7b0f3b8 data-v-0ad617a5 data-v-fa4fbb5e><span class="check" data-v-fa4fbb5e><span class="icon" data-v-fa4fbb5e><!--[--><span class="vpi-sun sun" data-v-0ad617a5></span><span class="vpi-moon moon" data-v-0ad617a5></span><!--]--></span></span></button></div></div></div><div class="group" data-v-e7b0f3b8><div class="item social-links" data-v-e7b0f3b8><div class="VPSocialLinks social-links-list" data-v-e7b0f3b8 data-v-0b2298c5><!--[--><a class="VPSocialLink no-icon" href="https://github.com/maomao1996/vitepress-nav-template" aria-label="github" target="_blank" rel="noopener" data-v-0b2298c5 data-v-20dc374c><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-75e0aaf6 data-v-f6cabffb><span class="container" data-v-f6cabffb><span class="top" data-v-f6cabffb></span><span class="middle" data-v-f6cabffb></span><span class="bottom" data-v-f6cabffb></span></span></button></div></div></div></div><div class="divider" data-v-75e0aaf6><div class="divider-line" data-v-75e0aaf6></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-ae963f28 data-v-5e311b6f><div class="container" data-v-5e311b6f><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5e311b6f data-v-f312e4be><button data-v-f312e4be>回到顶部</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-ae963f28 data-v-e459648d><div class="VPDoc has-aside" data-v-e459648d data-v-e29a6008><!--[--><!--]--><div class="container" data-v-e29a6008><div class="aside" data-v-e29a6008><div class="aside-curtain" data-v-e29a6008></div><div class="aside-container" data-v-e29a6008><div class="aside-content" data-v-e29a6008><div class="VPDocAside" data-v-e29a6008 data-v-b4affbcc><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-b4affbcc data-v-28de8ae3><div class="content" data-v-28de8ae3><div class="outline-marker" data-v-28de8ae3></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-28de8ae3>目录</div><ul class="VPDocOutlineItem root" data-v-28de8ae3 data-v-879c6a56><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-b4affbcc></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e29a6008><div class="content-container" data-v-e29a6008><!--[--><!--]--><main class="main" data-v-e29a6008><div style="position:relative;" class="vp-doc _StarShine-Web_ZNPCsPlus_API" data-v-e29a6008><div><h1 id="znpcsplus-api-文档" tabindex="-1">ZNPCsPlus API 文档 <a class="header-anchor" href="#znpcsplus-api-文档" aria-label="Permalink to &quot;ZNPCsPlus API 文档&quot;">​</a></h1><h2 id="maven-仓库" tabindex="-1">Maven 仓库 <a class="header-anchor" href="#maven-仓库" aria-label="Permalink to &quot;Maven 仓库&quot;">​</a></h2><p>要在项目中使用 ZNPCsPlus API，请将以下 Maven 仓库添加到您的 <code>pom.xml</code>：</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;pyr-snapshots&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Pyr&#39;s Repo&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;https://repo.pyr.lol/snapshots&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>将以下 Maven 依赖项添加到您的 <code>pom.xml</code>：</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;lol.pyr&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;znpcsplus-api&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{version}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;provided&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>将 <code>{version}</code> 替换为实际版本。</p><h2 id="gradle-仓库" tabindex="-1">Gradle 仓库 <a class="header-anchor" href="#gradle-仓库" aria-label="Permalink to &quot;Gradle 仓库&quot;">​</a></h2><p>对于 Gradle 项目，请将以下仓库添加到您的 <code>build.gradle</code>：</p><div class="language-gradle vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">gradle</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>maven {</span></span>
<span class="line"><span>    name &quot;pyrSnapshots&quot;</span></span>
<span class="line"><span>    url &quot;https://repo.pyr.lol/snapshots&quot;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>将以下依赖项添加到您的 <code>build.gradle</code>：</p><div class="language-gradle vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">gradle</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>compileOnly &quot;lol.pyr:znpcsplus-api:{version}&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>将 <code>{version}</code> 替换为实际版本。</p><h2 id="javadoc" tabindex="-1">JavaDoc <a class="header-anchor" href="#javadoc" aria-label="Permalink to &quot;JavaDoc&quot;">​</a></h2><p>通过参考<a href="https://repo.pyr.lol/javadoc/snapshots/lol/pyr/znpcsplus-api/2.0.0-SNAPSHOT" target="_blank" rel="noreferrer">此处</a>的简洁 JavaDoc 探索 ZNPCsPlus 的 API 结构。</p><h2 id="基本实现" tabindex="-1">基本实现 <a class="header-anchor" href="#基本实现" aria-label="Permalink to &quot;基本实现&quot;">​</a></h2><h3 id="获取-npcapi-实例" tabindex="-1">获取 <code>NpcApi</code> 实例 <a class="header-anchor" href="#获取-npcapi-实例" aria-label="Permalink to &quot;获取 `NpcApi` 实例&quot;">​</a></h3><p>要开始使用 API，请获取 <code>NpcApi</code> 的实例：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NpcApi npcApi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NpcApiProvider.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h3 id="获取-npc-类型" tabindex="-1">获取 NPC 类型 <a class="header-anchor" href="#获取-npc-类型" aria-label="Permalink to &quot;获取 NPC 类型&quot;">​</a></h3><p>在创建 NPC 之前，请获取所需的 NPC 类型：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NpcType playerNpcType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpcTypeRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;player&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不区分大小写</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (playerNpcType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NPC 类型在此服务器版本上不存在或不可用。&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h3 id="创建和注册-npc" tabindex="-1">创建和注册 NPC <a class="header-anchor" href="#创建和注册-npc" aria-label="Permalink to &quot;创建和注册 NPC&quot;">​</a></h3><p>使用所需的类型、位置和设置创建 NPC：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NpcEntry playerNpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpcRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;npc1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NPC ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Bukkit.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWorlds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 世界实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    playerNpcType, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NPC 类型</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NpcLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// x, y, z, yaw, pitch</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 启用 NPC 以由插件处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">playerNpc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setProcessed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 如果您需要为每个玩家自定义 NPC 可见性的逻辑，请保持&quot;processed&quot;禁用。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 注意：禁用&quot;processed&quot;将阻止某些属性（例如，外观行为、</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 可见距离、基于权限的可见性和击退属性）正常工作。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 启用 NPC 以保存在插件存储中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">playerNpc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSave</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 启用 NPC 以通过命令修改</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">playerNpc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAllowCommandModification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或者，您可以使用以下方法一次性启用以上所有功能</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">playerNpc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enableEverything</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><hr><h3 id="通过-id-获取-npc" tabindex="-1">通过 ID 获取 NPC <a class="header-anchor" href="#通过-id-获取-npc" aria-label="Permalink to &quot;通过 ID 获取 NPC&quot;">​</a></h3><p>使用其 ID 检索已注册的 NPC：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NpcEntry retrievedNpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpcRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npc1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (retrievedNpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;找到 NPC: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retrievedNpc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><h3 id="删除-npc" tabindex="-1">删除 NPC <a class="header-anchor" href="#删除-npc" aria-label="Permalink to &quot;删除 NPC&quot;">​</a></h3><p>从注册表中移除 NPC：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpcRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npc1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h3 id="将属性应用于-npc" tabindex="-1">将属性应用于 NPC <a class="header-anchor" href="#将属性应用于-npc" aria-label="Permalink to &quot;将属性应用于 NPC&quot;">​</a></h3><p>通过应用属性自定义 NPC：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取&quot;dinnerbone&quot;属性（使实体看起来倒置）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EntityProperty&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; dinnerboneProperty </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPropertyRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dinnerbone&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Boolean.class);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将属性应用于 NPC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NpcEntry zombieNpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpcRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zombie1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (zombieNpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    zombieNpc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dinnerboneProperty, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><h3 id="注册虚拟属性" tabindex="-1">注册虚拟属性 <a class="header-anchor" href="#注册虚拟属性" aria-label="Permalink to &quot;注册虚拟属性&quot;">​</a></h3><p>注册用于测试的虚拟属性：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPropertyRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerDummy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my_property&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Boolean.class);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h3 id="创建和分配动作" tabindex="-1">创建和分配动作 <a class="header-anchor" href="#创建和分配动作" aria-label="Permalink to &quot;创建和分配动作&quot;">​</a></h3><p>创建 <code>MessageAction</code> 并将其分配给 NPC：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建在左键点击时发送消息的动作</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">InteractionAction action </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getActionFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createMessageAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;Hello, world!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    InteractionType.LEFT_CLICK, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 交互类型</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 冷却时间（秒）</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 延迟（刻）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将动作分配给 NPC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zombieNpc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(action);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr><h3 id="设置-npc-皮肤" tabindex="-1">设置 NPC 皮肤 <a class="header-anchor" href="#设置-npc-皮肤" aria-label="Permalink to &quot;设置 NPC 皮肤&quot;">​</a></h3><p>皮肤仅适用于玩家 NPC 类型。以下是设置不同类型皮肤的方法：</p><h4 id="镜像玩家皮肤" tabindex="-1">镜像玩家皮肤 <a class="header-anchor" href="#镜像玩家皮肤" aria-label="Permalink to &quot;镜像玩家皮肤&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SkinDescriptor mirrorDescriptor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSkinDescriptorFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createMirrorDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="静态皮肤-使用玩家名称" tabindex="-1">静态皮肤（使用玩家名称） <a class="header-anchor" href="#静态皮肤-使用玩家名称" aria-label="Permalink to &quot;静态皮肤（使用玩家名称）&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SkinDescriptor staticSteveDescriptor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSkinDescriptorFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createStaticDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;steve&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="静态皮肤-使用纹理值和签名" tabindex="-1">静态皮肤（使用纹理值和签名） <a class="header-anchor" href="#静态皮肤-使用纹理值和签名" aria-label="Permalink to &quot;静态皮肤（使用纹理值和签名）&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SkinDescriptor staticTextureDescriptor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcAPI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSkinDescriptorFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createStaticDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ewogICJ0aW1lc3RhbXAiIDogMTczNTExNzEzNzY0MSwKICAicHJvZmlsZUlkIiA6ICIxNmQ4NjI4NzYzMWY0NDY2OGQ0NDM2ZTJlY2IwNTllNSIsCiAgInByb2ZpbGVOYW1lIiA6ICJSZXphVG91cm5leSIsCiAgInNpZ25hdHVyZVJlcXVpcmVkIiA6IHRydWUsCiAgInRleHR1cmVzIiA6IHsKICAgICJTS0lOIiA6IHsKICAgICAgInVybCIgOiAiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS81ODc0Nzk0OWMxOTUyMWEwYTAwOTgwYjNhMGVkODJjYzIzNmVkMjc5OWIzMGNiZDY4Nzk1ZGNiMDg5NTE5Y2NhIiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0=&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ZzIpWZCCCT6H95QQk0SCwF8hWjWL+J764KqH8hhpmTl5SfCHnoj8W4wZnPevrO+q213NgzGmZVEVucR16stX/39+H+NmLFILOBh+FDbRQgEhheyZGYEIj+25gvKRHddHW5eLIS+fOrXDXFffktLR8ImEtFQzFNWVQ8YHb6jmth2OUJgVTxz76UYZ0RVo/8dYbARijWyypTc95+8rOImoJl2f77qiIsPptxeorHdJ6+i0LfFQnbQzGO9GDVjShso/B1UMdoFEITO4MVG8RYpV7F1Awd7891N2vdhIAPWptIADAK/VFU6HG5dyOJoB8FEjPK5vpV/qaH5MQ5JqO2tjT6re1BEeKamymRX+LsgNJYq360gJAsf93tR1Q7oI8GtJ/6KGymGNRH5X6dPVNAgIx6yRvqbBDFW12bYlWFGvdY3kTYn50xe5oFtm6gas5CHJdnGL86m4iunNVtE7GKvYrXtxcAEP2HzfZ5b4eOyK5LOi8A55Z2rNmCKn/5YPX50OjpooNsZivrOvu4+qrs7EMa7JOqqKeq8WE+duLykJr1qXoURY4cz7JDGqHLJrE7E2FaQf4JoMdzdxNZIfvwFzhIh9TcQ/6iSOf439lc54d6vJuGcXLXBjmSq7GNAawxNTy7d3V/Bo0bnrQEh1EKE1LlkUP3ubnw+CW7jJcx9pPd8=&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="动态-刷新皮肤-使用静态玩家名称" tabindex="-1">动态/刷新皮肤（使用静态玩家名称） <a class="header-anchor" href="#动态-刷新皮肤-使用静态玩家名称" aria-label="Permalink to &quot;动态/刷新皮肤（使用静态玩家名称）&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SkinDescriptor dynamicSteveDescriptor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcAPI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSkinDescriptorFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRefreshingDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Steve&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="动态-刷新皮肤-使用占位符" tabindex="-1">动态/刷新皮肤（使用占位符） <a class="header-anchor" href="#动态-刷新皮肤-使用占位符" aria-label="Permalink to &quot;动态/刷新皮肤（使用占位符）&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SkinDescriptor dynamicPlaceholderDescriptor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcAPI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSkinDescriptorFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRefreshingDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%top_player_1_name%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="url-皮肤" tabindex="-1">URL 皮肤 <a class="header-anchor" href="#url-皮肤" aria-label="Permalink to &quot;URL 皮肤&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SkinDescriptor urlDescriptor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSkinDescriptorFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createUrlDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;https://www.minecraftskins.com/uploads/skins/2024/12/24/iceman-22953593.png?v737&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;slim&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="文件皮肤" tabindex="-1">文件皮肤 <a class="header-anchor" href="#文件皮肤" aria-label="Permalink to &quot;文件皮肤&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SkinDescriptor fileDescriptor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcAPI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSkinDescriptorFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createFileDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;skin2.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>注意：文件应该在文件夹 <code>./plugins/ZNPCsPlus/skins</code> 中</p><h4 id="应用皮肤" tabindex="-1">应用皮肤 <a class="header-anchor" href="#应用皮肤" aria-label="Permalink to &quot;应用皮肤&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取&quot;skin&quot;属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EntityProperty&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SkinDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; skinProperty </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPropertyRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;skin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, SkinDescriptor.class);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将皮肤应用于 NPC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">playerNpc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(skinProperty, staticSteveDescriptor);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h3 id="序列化-npc" tabindex="-1">序列化 NPC <a class="header-anchor" href="#序列化-npc" aria-label="Permalink to &quot;序列化 NPC&quot;">​</a></h3><p>将 NPC 保存为 YAML 格式：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NpcSerializer&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">YamlConfiguration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; yamlSerializer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpcSerializerRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSerializer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(YamlConfiguration.class);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">YamlConfiguration serializedPlayerNpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> yamlSerializer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">serialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(playerNpc);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><h3 id="反序列化和注册-npc" tabindex="-1">反序列化和注册 NPC <a class="header-anchor" href="#反序列化和注册-npc" aria-label="Permalink to &quot;反序列化和注册 NPC&quot;">​</a></h3><p>从 YAML 加载 NPC 并注册：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NpcEntry deserializedPlayerNpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> yamlSerializer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deserialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(serializedPlayerNpc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npcApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNpcRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deserializedPlayerNpc);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如需指导，请加入我们的 <a href="https://discord.gg/MAZz6XpPcg" target="_blank" rel="noreferrer">Discord</a> 社区。</p></div></div></main><footer class="VPDocFooter" data-v-e29a6008 data-v-e56c0bb0><!--[--><!--[--><!--[--><!--[--><div class="doc-comments"><!----></div><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-e56c0bb0><!----><div class="last-updated" data-v-e56c0bb0><p class="VPLastUpdated" data-v-e56c0bb0 data-v-6942ea57>最后更新于: <time datetime="2025-07-29T14:35:03.000Z" data-v-6942ea57></time></p></div></div><!----></footer><!--[--><!--[--><!--[--><div style="display:none;" class="m-doc-footer" data-v-694eb995><div class="m-doc-footer-message" data-v-694eb995><img class="visitor" src="https://visitor-badge.laobi.icu/badge?page_id=starshine.vitepress-web./ZNPCsPlus/API" title="当前页面累计访问数" onerror="this.style.display=&#39;none&#39;" data-v-694eb995><p data-v-694eb995>本站由StarShine工作室二次开发，经vitepress模板修改而来&lt;br&gt;致谢：&lt;a href=&quot;https://github.com/maomao1996/vitepress-nav-template&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;原源码&lt;/a&gt;</p></div><p class="m-doc-footer-copyright" data-v-694eb995>Copyright © 2024-present StarShineMC</p></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-ae963f28 data-v-e8722afb><div class="container" data-v-e8722afb><p class="message" data-v-e8722afb>本站由StarShine工作室二次开发，经vitepress模板修改而来<br>致谢：<a href="https://github.com/maomao1996/vitepress-nav-template" target="_blank" rel="noopener">原源码</a></p><p class="copyright" data-v-e8722afb>Copyright © 2024-present StarShineMC</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about.md\":\"C-asd1Hi\",\"community.md\":\"C4wwKhKe\",\"contact.md\":\"BUFA4YEP\",\"dh_index.md\":\"C_ALa2Xa\",\"downloads.md\":\"CXivZj7Z\",\"features.md\":\"CAHt7OWg\",\"index.md\":\"D0yOAoPa\",\"nav_index.md\":\"BmBrvNlD\",\"news_2025-06-20-summer-event.md\":\"CCtlR8FG\",\"news_2025-06-26-maintenance.md\":\"DtMDNS4H\",\"news_index.md\":\"D1g2z3La\",\"test.md\":\"bl1ivwvs\",\"znpcsplus__footer.md\":\"QOo0P7xb\",\"znpcsplus__sidebar.md\":\"DmcXgxn6\",\"znpcsplus_api.md\":\"Fwq-wxZM\",\"znpcsplus_commands.md\":\"raR38H1u\",\"znpcsplus_converting.md\":\"CHlKNpx-\",\"znpcsplus_index.md\":\"okezpGGp\",\"znpcsplus_npc-types.md\":\"CeRJQQ-K\",\"znpcsplus_permissions.md\":\"0BgmGvcO\",\"znpcsplus_properties.md\":\"D-WW4u7o\",\"znpcsplus_setup.md\":\"DANAOsLy\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"星光StarShine\",\"description\":\"专注于现代城市建筑与真实铁路交通规划，基于Fabric 1.20.1高优化环境运行。核心特色：深度整合MTR地铁模拟系统实现真实轨道规划，WorldEdit快速建造支持中国地标复刻。采用审核制社群管理，保障高质量建筑设计，提供标准化车站指南及建造资源包。加入中文玩家社区，参与城市联建计划与交通网络设计。\",\"base\":\"/StarShine-Web/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"i18nRouting\":false,\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"插件服在线地图\",\"link\":\"http://mc.8bc.top:20000/\"},{\"text\":\"模组服在线地图\",\"link\":\"http://mc.8bc.top:27774/\"}],\"sidebar\":{},\"outline\":{\"level\":\"deep\",\"label\":\"目录\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/maomao1996/vitepress-nav-template\"}],\"footer\":{\"message\":\"本站由StarShine工作室二次开发，经vitepress模板修改而来<br>致谢：<a href=\\\"https://github.com/maomao1996/vitepress-nav-template\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">原源码</a>\",\"copyright\":\"Copyright © 2024-present StarShineMC\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"returnToTopLabel\":\"回到顶部\",\"sidebarMenuLabel\":\"菜单\",\"darkModeSwitchLabel\":\"主题\",\"lightModeSwitchTitle\":\"切换到浅色模式\",\"darkModeSwitchTitle\":\"切换到深色模式\",\"visitor\":{\"badgeId\":\"starshine.vitepress-web\"},\"comment\":{\"repo\":\"Xk233a/StarShine-Web\",\"repoId\":\"R_kgDOOoDDWw\",\"category\":\"General\",\"categoryId\":\"DIC_kwDOOoDDW84Cr1gl\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>